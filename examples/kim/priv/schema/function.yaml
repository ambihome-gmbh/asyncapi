$schema: https://json-schema.org/draft/2020-12/schema

function:
  oneOf:
    - $ref: "#/$defs/switchLight"
    - $ref: "#/$defs/dimLight"

$defs:
  switchLight:
    title: User Light Switching
    type: object
    properties:
      id:
        type: string
        format: uuid
      type:
        const: mac#switchLight
      name:
        type: string
      trade:
        const: "tag#lighting"
      function_points:
        type: object
        properties:
          mac#LightCurrentStatus:
            type: string
            format: uuid
          mac#LightSwitchRequest:
            type: string
            format: uuid
        required:
          - mac#LightCurrentStatus
          - mac#LightSwitchRequest
        additionalProperties: false
      function_location:
        type: string
        format: uuid
    required:
      - id
      - type
      - name
      - trade
      - function_points
      - function_location
    additionalProperties: false

  dimLight:
    title: User Light Dimming
    type: object
    properties:
      id:
        type: string
        format: uuid
      type:
        const: mac#dimLight
      name:
        type: string
      trade:
        const: "tag#lighting"
      function_points:
        type: object
        properties:
          mac#LightCurrentStatus:
            type: string
            format: uuid
          mac#LightSwitchRequest:
            type: string
            format: uuid
          mac#LightBrightness:
            type: string
            format: uuid
          mac#LightBrightnessRequest:
            type: string
            format: uuid
        required:
          - mac#LightCurrentStatus
          - mac#LightSwitchRequest
          - mac#LightBrightness
          - mac#LightBrightnessRequest
        additionalProperties: false
      function_location:
        type: string
        format: uuid
    required:
      - id
      - type
      - name
      - trade
      - function_points
      - function_location
    additionalProperties: false