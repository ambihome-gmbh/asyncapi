{
  "asyncapi": "3.0.0",
  "channels": {
    "GrpVal_Write_req": {
      "address": "ambid/to_KNX/{group_address}/GrpVal_Write/req",
      "messages": {
        "ambid_to_knx": {
          "$ref": "#/components/messages/ambid_to_knx"
        }
      },
      "description": "Request to write a value to `group_address`.",
      "parameters": {
        "group_address": {
          "$ref": "#/components/parameters/group_address"
        }
      }
    },
    "GrpVal_Read_req": {
      "address": "ambid/to_KNX/{group_address}/GrpVal_Read/req",
      "messages": {
        "ambid_to_knx": {
          "$ref": "#/components/messages/ambid_to_knx"
        }
      },
      "description": "Read the value of `group-address`. Used by the state-service to initialize after server reboot.",
      "parameters": {
        "group_address": {
          "$ref": "#/components/parameters/group_address"
        }
      }
    },
    "GrpVal_Write_ind": {
      "address": "ambid/from_KNX/{group_address}/GrpVal_Write/ind",
      "messages": {
        "ambid_from_knx": {
          "$ref": "#/components/messages/ambid_from_knx"
        }
      },
      "description": "A KNX device has written a value to `group-address`.",
      "parameters": {
        "group_address": {
          "$ref": "#/components/parameters/group_address"
        }
      }
    },
    "GrpVal_Resp_ind": {
      "address": "ambid/from_KNX/{group_address}/GrpVal_Resp/ind",
      "messages": {
        "ambid_from_knx": {
          "$ref": "#/components/messages/ambid_from_knx"
        }
      },
      "description": "A KNX device responds to a GrpVal_Read.req to `group-address`. Used by the state-service to initialize after server reboot.",
      "parameters": {
        "group_address": {
          "$ref": "#/components/parameters/group_address"
        }
      }
    }
  },
  "components": {
    "parameters": {
      "group_address": {
        "description": "group_address"
      }
    },
    "messages": {
      "ambid_to_knx": {
        "name": "to_knx",
        "title": "Message to KNX",
        "contentType": "application/json",
        "payload": {
          "$ref": "#/components/schemas/ambid_payload"
        }
      },
      "ambid_from_knx": {
        "name": "from_knx",
        "title": "Message from KNX",
        "contentType": "application/json",
        "payload": {
          "$ref": "#/components/schemas/ambid_payload"
        }
      }
    },
    "schemas": {
      "ambid_payload": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "Value": {
            "anyOf": [
              {
                "type": "number",
                "description": "If possible all DPTs are decoded as numbers."
              },
              {
                "type": "string",
                "description": "Some like Text and Date/Time DPTs are strings. TODO: format of complex DPT like Date/Time"
              }
            ]
          },
          "Unit": {
            "description": "Optional unit of the value. Ignored if sent to KNX.",
            "type": "string"
          },
          "Ctrl": {
            "description": "cEMI control-flags",
            "type": "string"
          },
          "Src": {
            "description": "source address",
            "type": "string"
          },
          "Dpt": {
            "description": "datapoint type",
            "type": "string"
          }
        }
      }
    }
  }
}
